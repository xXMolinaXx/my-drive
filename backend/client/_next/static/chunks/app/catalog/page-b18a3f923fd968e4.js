(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[43],{8125:function(e,t,n){Promise.resolve().then(n.bind(n,4225))},4225:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return S}});var r=n(7437),s=n(2265),i=n(1504),o=n(3473),c=n(6548),a=n(8433),l=n(468),u=n(7245),d=n(270),h=n(4037),m=n(4696),x=n(1655),p=n(511),f=n(2879),g=n(1423),j=n(5410),v=n(8652),Z=n(7478);function C(){let{setShoppingCart:e,shoppingCart:t}=(0,s.useContext)(i.x),[n,d]=(0,s.useState)([{category:"",name:"",price:0,__v:0,_id:""}]),[h,m]=(0,s.useState)("ninguno"),[x,p]=(0,s.useState)(0),[f]=(0,s.useState)(24),[g,C]=(0,s.useState)(0),[S,b]=(0,s.useState)(0),[k,N]=(0,s.useState)(!1),[_,w]=(0,s.useState)(!1),[P,I]=(0,s.useState)(""),E=n=>{let{name:r="",price:s=0,_id:i=""}=n,o=[...t.products];-1===o.findIndex(e=>e._id===i)&&(o.push({name:r,price:s,category:"",amount:1,_id:i}),e({...t,amountProducts:t.amountProducts+1,products:o}),(0,v.Xq)({name:r,price:s,category:"",_id:i}))},O=()=>{N(!0),d([]),fetch("".concat(j.v.backend,"/products/").concat(x,"/").concat(f,"/").concat(h)).then(e=>e.json()).then(e=>{if(200===e.statusCode){var t,n;d((null===(t=e.data)||void 0===t?void 0:t.products)||[]),C(Math.round((null===(n=e.data)||void 0===n?void 0:n.count)/f)),N(!1)}else w(!0),I(e.message)}).catch(e=>{N(!1),w(!0),I(e.toString())})};return(0,s.useEffect)(()=>{O()},[x]),(0,r.jsxs)("div",{className:"px-4  md:px-[20%] lg:px-[20%] mb-14",children:[(0,r.jsx)("section",{className:"mt-4 flex",children:(0,r.jsx)(o.Z,{id:"search-product",label:"Buscar por nombre del producto",variant:"outlined",fullWidth:!0,InputProps:{endAdornment:(0,r.jsx)(c.Z,{className:"sm:w-full md:w-1/3 lg:w-1/3 ml-2 rounded-r-lg",variant:"contained",onClick:()=>{p(0),O()},children:"Buscar"})},onChange:e=>{m(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&(p(0),O())}})}),(0,r.jsxs)("section",{className:"mt-4 ",children:[(0,r.jsx)(a.ZP,{container:!0,spacing:2,justifyContent:"center",children:k?(0,r.jsx)(l.Z,{}):null==n?void 0:n.map(e=>(0,r.jsx)(a.ZP,{item:!0,xs:12,md:3,lg:3,children:(0,r.jsx)(y,{name:e.name,price:e.price,addToCart:()=>E(e)})},e._id))}),(0,r.jsx)(u.Z,{className:"mt-4",count:g,page:S,color:"primary",onChange:(e,t)=>{p(t*f-f),b(t)}})]}),(0,r.jsx)(Z.Z,{handleClose:()=>w(!1),message:P,open:_,type:"error"})]})}function S(){return(0,r.jsx)(i.Z,{children:(0,r.jsx)(C,{})})}function y(e){let{price:t=100,name:n="Productos",addToCart:s}=e;return(0,r.jsxs)(d.Z,{children:[(0,r.jsx)(h.Z,{sx:{height:100},style:{objectFit:"cover"},image:"/blood-tube.webp",title:"green iguana"}),(0,r.jsxs)(m.Z,{children:[(0,r.jsx)(x.Z,{title:n,children:(0,r.jsx)(p.Z,{variant:"body1",component:"div",noWrap:!0,children:n})}),(0,r.jsxs)(p.Z,{sx:{mb:1.5},color:"text.secondary",children:["L. ",t]})]}),(0,r.jsx)(f.Z,{className:"flex justify-center",children:(0,r.jsx)(x.Z,{title:"Agregar a carrito",children:(0,r.jsx)(c.Z,{size:"small",variant:"contained",onClick:s,children:(0,r.jsx)(g.Z,{})})})})]})}},5410:function(e,t,n){"use strict";n.d(t,{v:function(){return r}});let r={backend:"http://18.118.8.253"}},8652:function(e,t,n){"use strict";n.d(t,{Xq:function(){return s},bL:function(){return o},dv:function(){return i}});let r="cart";function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(localStorage.getItem(r)){let n=JSON.parse(localStorage.getItem(r)||"2");n.push({name:e.name,price:e.price,amount:t,_id:e._id}),localStorage.setItem(r,JSON.stringify(n))}else localStorage.setItem(r,JSON.stringify([{name:e.name,price:e.price,amount:t,_id:e._id}]))}function i(){let e=localStorage.getItem(r);return e?JSON.parse(e):[]}function o(e){localStorage.setItem(r,JSON.stringify(e))}},301:function(e,t,n){"use strict";function r(){let e=document.cookie.split(";"),t="";return e.forEach(e=>{let n=e.split("=");"access_token"===n[0].trim()&&(t=n[1])}),t}n.d(t,{C:function(){return r}})},7478:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(7437),s=n(1520),i=n(4818);function o(e){let{message:t,open:n,handleClose:o,type:c,duration:a=3e3}=e;return(0,r.jsx)(s.Z,{anchorOrigin:{vertical:"top",horizontal:"center"},open:n,autoHideDuration:a,onClose:o,children:(0,r.jsx)(i.Z,{onClose:o,severity:c,variant:"filled",sx:{width:"100%"},children:t})})}},1504:function(e,t,n){"use strict";n.d(t,{Z:function(){return v},x:function(){return g}});var r=n(7437),s=n(2265),i=n(6463),o=n(1733),c=n(1326),a=n(9806),l=n(511),u=n(6548),d=n(2429),h=n(8438),m=n(2508),x=n(6648);n(5410);var p=n(301),f=n(8652);let g=(0,s.createContext)({setShoppingCart:()=>{},shoppingCart:{amountProducts:0,products:[{name:"",price:0,category:""}]}});function j(e){let{children:t}=e,{shoppingCart:n}=(0,s.useContext)(g),f=(0,i.useRouter)(),[j,v]=s.useState(!1),[Z,C]=(0,s.useState)("register"),[S,y]=(0,s.useState)(!1),[b,k]=(0,s.useState)(),N=(e,t)=>()=>{v(e),C(t)};(0,s.useEffect)(()=>{let e=localStorage.getItem("user");e&&k(JSON.parse(e))},[]),(0,s.useEffect)(()=>{(0,p.C)()||f.push("/")},[]);let _=(0,r.jsxs)(c.Z,{sx:{width:300},role:"presentation",children:[(0,r.jsx)("div",{className:"flex justify-center pl-5 pt-5 pr-5",children:(0,r.jsxs)("div",{children:[(0,r.jsx)(u.Z,{className:"mb-2",variant:"outlined",type:"submit",fullWidth:!0,children:"Mis ordenes"}),(0,r.jsx)(u.Z,{className:"mb-2",variant:"outlined",type:"submit",fullWidth:!0,onClick:()=>{localStorage.removeItem("user"),k(null),document.cookie="access_token=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/",v(!1),f.push("/")},children:"Cerrar sesion"})]})}),(0,r.jsx)(u.Z,{variant:"contained",className:"mx-5 mt-5",onClick:N(!1,"login"),children:"Cerrar"})]});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("nav",{children:(0,r.jsxs)(c.Z,{sx:{flexGrow:1},children:[(0,r.jsx)(h.ZP,{anchor:"right",open:j,onClose:N(!1,"login"),children:_}),(0,r.jsx)(o.Z,{position:"static",children:(0,r.jsxs)(a.Z,{children:[(0,r.jsx)(x.default,{src:"/LCM.png",alt:"logo",width:100,height:100,onClick:()=>f.push("/catalog")}),(0,r.jsx)(l.Z,{variant:"h6",component:"div",sx:{flexGrow:1}}),b?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.Z,{color:"inherit",onClick:N(!0,"user"),children:b.fullName}),(0,r.jsx)(m.Z,{badgeContent:n.amountProducts,color:"warning",children:(0,r.jsx)(d.Z,{onClick:()=>f.push("/shoppingCart")})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.Z,{color:"inherit",onClick:N(!0,"register"),children:"Registrarse"}),(0,r.jsx)(u.Z,{color:"inherit",onClick:N(!0,"login"),children:"Ingresar"})]})]})})]})}),(0,r.jsx)("main",{children:t})]})}function v(e){let{children:t}=e,[n,i]=(0,s.useState)({products:[{name:"",price:0,category:"",amount:0}],amountProducts:0});return(0,s.useEffect)(()=>{let e=(0,f.dv)(),t=0;e.forEach(e=>{t=(e.amount||0)+t}),i({amountProducts:t,products:e})},[]),(0,r.jsx)(g.Provider,{value:{shoppingCart:n,setShoppingCart:i},children:(0,r.jsx)(j,{children:t})})}}},function(e){e.O(0,[276,564,648,670,310,562,478,23,744],function(){return e(e.s=8125)}),_N_E=e.O()}]);